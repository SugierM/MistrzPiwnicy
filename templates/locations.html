{% extends "base.html" %}
{% block title %}Lokacje{% endblock %}
{% block top_title %}ğŸŒ Lokacje{% endblock %}

{% block content %}
<h2>ğŸ“ Struktura kampanii (Google Drive)</h2>
<div id="drive-tree" style="margin-bottom: 20px;"></div>

<script>
async function loadDriveTree() {
  const res = await fetch('/api/drive/tree');
  const tree = await res.json();
  const container = document.getElementById('drive-tree');
  container.innerHTML = renderTree(tree);
}

function renderTree(obj) {
  let html = '<ul>'
  for (const key in obj) {
    if (typeof obj[key] === 'object') {
      html += `<li><strong>${key}</strong>${renderTree(obj[key])}</li>`;
    } else {
      html += `<li>${key}</li>`;
    }
  }
  html += '</ul>';
  return html;
}

document.addEventListener('DOMContentLoaded', loadDriveTree);
</script>

<hr>

<div class="flex-container">
  <div class="tree-panel">
    <h2>Drzewo kampanii</h2>
    <div id="location-tree"></div>
  </div>
  <div class="edit-panel">
    <h2>SzczegÃ³Å‚y</h2>
    <div id="details">Wybierz lokalizacjÄ™ z lewej strony.</div>
  </div>
</div>
{% endblock %}